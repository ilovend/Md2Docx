# 锁定规格书 v1.0

## 需求：完善 Md2Docx 前端框架搭建

**创建日期：** 2026-01-26  
**需求编号：** REQ-001  
**状态：** ✅ 已锁定

---

## 1. 🎯 核心目标

**用户故事：**
> 作为一个 **Md2Docx 开发者**，我想要 **将 Figma 原型代码重构为规范的工程化前端项目**，以便实现 **可维护、可扩展、可独立运行的桌面应用**。

**核心价值：**
- 解决目录结构混乱问题，提升开发效率
- 建立清晰的状态管理机制，降低维护成本
- 实现浏览器预览 + Electron 桌面双模式运行

---

## 2. 🗺️ 系统范围与边界

### 包含模块（分阶段）

| 阶段 | 模块 | 内容 |
|:---|:---|:---|
| **Phase 1** | 目录重构 | 按功能/领域重新组织代码结构 |
| **Phase 1** | 路由系统 | React Router 路由配置 |
| **Phase 1** | 状态管理 | Zustand 状态管理方案 |
| **Phase 2** | API 层 | 统一 HTTP 客户端封装 |
| **Phase 2** | 环境配置 | 开发/生产环境变量管理 |
| **Phase 2** | 代码规范 | ESLint + Prettier 集成 |
| **Phase 3** | Electron 主进程 | 窗口管理、系统集成 |
| **Phase 3** | IPC 通信 | 渲染进程与主进程桥接 |
| **Phase 3** | 后端进程管理 | Python 后端生命周期管理 |
| **Phase 4** | 打包配置 | electron-builder 配置 |

### I/O 规范

| 类型 | 规范 |
|:---|:---|
| **输入** | `Access Project Link/` (历史原型) -> `frontend/` (新工程) |
| **输出** | 重构后的前端项目，支持 `npm run dev` 和 `npm run electron:dev` |

### 明确非目标

- ❌ 本次**不做**组件库文档（Storybook）
- ❌ 本次**不做**主题切换功能
- ❌ 本次**不做**响应式适配
- ❌ 本次**不做**组件单元测试
- ❌ 本次**不做**生产环境打包发布

---

## 3. ✅ 验收标准

### Phase 1：工程化基础

| 编号 | 验收标准 |
|:---|:---|
| AC-01 | When 开发者查看项目结构时，呈现清晰的按功能划分的目录结构 |
| AC-02 | When 用户点击侧边栏导航项时，通过 React Router 正确切换视图 |
| AC-03 | When 组件需要共享状态时，通过 Zustand store 进行状态管理 |
| AC-04 | When 执行 `npm run dev` 时，在浏览器中完整运行所有现有功能 |

### Phase 2：API 与规范

| 编号 | 验收标准 |
|:---|:---|
| AC-05 | When 前端需要调用后端 API 时，通过统一的 API 客户端发送请求 |
| AC-06 | When 代码提交前，通过 ESLint 和 Prettier 自动检查代码规范 |
| AC-07 | When 在不同环境运行时，根据环境变量自动切换配置 |

### Phase 3：Electron 集成

| 编号 | 验收标准 |
|:---|:---|
| AC-08 | When 执行 `npm run electron:dev` 时，启动 Electron 窗口并加载前端应用 |
| AC-09 | When Electron 应用启动时，自动启动 Python 后端进程 |
| AC-10 | When 渲染进程需要访问本地文件系统时，通过 IPC 通道完成操作 |
| AC-11 | When Electron 应用关闭时，正确终止 Python 后端进程 |

### Phase 4：打包配置

| 编号 | 验收标准 |
|:---|:---|
| AC-12 | When 执行打包命令时，生成可分发的安装包（Windows） |

---

## 4. ⛓️ 技术约束

| 约束 | 说明 |
|:---|:---|
| 框架 | React 18 + TypeScript |
| 构建工具 | Vite |
| 样式 | Tailwind CSS 4 |
| UI 组件 | Radix UI |
| 状态管理 | Zustand |
| 路由 | React Router v6 |
| 桌面框架 | Electron |

---

## 5. 📁 目标目录结构

```
src/
├── main/                    # Electron 主进程 (Phase 3)
│   ├── index.ts
│   ├── preload.ts
│   └── ipc/
├── renderer/                # 渲染进程
│   ├── components/
│   │   ├── ui/              # 基础 UI 组件
│   │   └── common/          # 业务通用组件
│   ├── pages/               # 页面组件
│   ├── stores/              # Zustand 状态
│   ├── services/            # API 服务层
│   ├── hooks/               # 自定义 Hooks
│   ├── utils/               # 工具函数
│   ├── types/               # TypeScript 类型
│   └── styles/              # 全局样式
└── shared/                  # 共享代码
```
